import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.WFquGv8Z.js";function S(){const[f,g]=n.useState(!1),[h,p]=n.useState(""),[r,x]=n.useState([]),[m,c]=n.useState([]),[d,y]=n.useState(""),[b,j]=n.useState(!1),v=t=>{t.preventDefault(),h==="admin123"?(g(!0),l()):alert("Invalid Password")},l=async()=>{j(!0);try{const s=await(await fetch("/api/products?admin=true")).json();x(s),c(s)}catch(t){console.error(t)}finally{j(!1)}};n.useEffect(()=>{if(!d){c(r);return}const t=d.toLowerCase(),s=r.filter(a=>a.name.toLowerCase().includes(t)||a.category.toLowerCase().includes(t)||a.id.includes(t));c(s)},[d,r]);const w=t=>{const s=t.variants&&t.variants.length?t.variants.map(i=>`${i.size||""} ${i.color||""}`).join(", "):"Standard",a=`
âœ¨ ${t.name} âœ¨
Category: ${t.category}

ðŸ“ Options: ${s}
ðŸ’° Price: $${t.price} (Limited Time!)

${t.description}

ðŸ”¥ Hot Deal! Stock is running low.
ðŸ“© Check it out here: ${window.location.origin}/products/${t.id}
    `.trim();navigator.clipboard.writeText(a),alert("Lead copied to clipboard!")},u=async(t,s,a)=>{const i=r.map(o=>o.id===t?{...o,[s]:a}:o);x(i),c(i);try{await fetch("/api/products?admin=true",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,[s]:a})})}catch{alert("Update failed!"),l()}};return f?e.jsxs("div",{className:"admin-dashboard",children:[e.jsxs("div",{className:"admin-header",children:[e.jsx("h1",{children:"Product Management"}),e.jsx("input",{type:"text",placeholder:"Search products...",value:d,onChange:t=>y(t.target.value),className:"admin-search"}),e.jsx("button",{className:"refresh-btn",onClick:l,children:"Refresh Data"})]}),b?e.jsx("div",{className:"loading",children:"Loading data..."}):e.jsxs("div",{className:"table-container",children:[e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Cost"}),e.jsx("th",{children:"Profit"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:m.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:e.jsx("a",{href:`/products/${t.id}`,target:"_blank",rel:"noreferrer",children:t.name})}),e.jsx("td",{children:t.category}),e.jsx("td",{children:e.jsx("input",{type:"number",value:t.price,className:"edit-input",onChange:s=>u(t.id,"price",s.target.value)})}),e.jsxs("td",{className:"text-red-600",children:["$",t.cost||"-"]}),e.jsxs("td",{className:"text-green-600",children:["$",t.profit||"-"]}),e.jsx("td",{children:e.jsx("input",{type:"number",value:t.stock||0,className:"edit-input w-20",onChange:s=>u(t.id,"stock",s.target.value)})}),e.jsx("td",{children:e.jsx("button",{onClick:()=>w(t),className:"action-btn copy-btn",children:"Copy Lead"})})]},t.id))})]}),m.length===0&&e.jsx("div",{className:"no-results",children:"No products found."})]})]}):e.jsx("div",{className:"login-container",children:e.jsxs("form",{onSubmit:v,className:"login-form",children:[e.jsx("h2",{children:"Admin Access"}),e.jsx("input",{type:"password",value:h,onChange:t=>p(t.target.value),placeholder:"Enter Password"}),e.jsx("button",{type:"submit",children:"Login"})]})})}export{S as default};
